The NodeBot Server is a NodeJS module that runs in the Node environment.

█ NodeBot Server acts as a small Web Server and "serves" your
  UI Web Application to control your NodeBot (any MCU based device),
  such as a robot or CNC machine.  The web app it serves is
  the specific device's user interface, e.g. Motion Controller.
  
█ NodeBot Server also acts as a WebSocket server.  It provides
  bidirectional communication by websocket between the device's
  user interface app and any number of MCU boards running
  their firmware.  It communicates with the MCU boards by
  individual serial port.
  
█ In Windows, to open more than the default number of
  serial ports (4), you must increase the threadpool size
  by setting the following environment variable:
  
    UV_THREADPOOL_SIZE=32
    
█ This module is executed by running the NodeBot Server
  from the NodeBot_Server folder:
  
    > node NodeBotServer.js
    
  NodeBotServer starts by reading the 'portConfigs.json' file
  and opens all serial ports that are configured.
  The format of the 'portConfigs.json' file is an array of
  serial port settings (JSON objects).  For example:
  [
    {
      "deviceName"   : "Robot Motor 1",    - your own text name for the device
      "portName"     : "COM5",             - OS port name (COMn in Windows)
      "portSettings" : "57600|8|1|none",   - baud rate, data bits, stop bits, parity
      "serialPort"   : "undefined"         - leave as is, it is set and used by NodeBotServer
    },
    {
      "deviceName"   : "Robot Motor 2",
      "portName"     : "COM6",
      "portSettings" : "57600|8|1|none",
      "serialPort"   : "undefined"
    },
    :
    :
  ]
  The newline character '\n' is used for serial message delimiting.
  
█ Folder Structure:
    MyRobot                          - Parent folder of your NodeBot project
      │
      ├── NodeBot_Client             - Parent folder of your web app (NodeBot UI)
      │     │
      │     ├──                      - HTML Web App folders and files
      │     ├──                          :
      │     :                            :
      │
      └── NodeBot_Server             - Parent folder of the NodeBot Server
            │
            ├── NodeBotServer.js     - this file
            ├── package.json         - required for this module
            ├── portConfigs.json     - serial port configs for your MCU boards
            └── node_modules         - required node modules
                  │                      :
                  ├──                    :
                  ├──
                  :
                  
█ Websocket messages to/from the client web application and the
  MCU firmware boards:
    The message begins with one or more digits (Device ID)
    to indicate which board to communicate with.
    
    id|message  - send <message> to device <id>
    
  where <id> is a zero-based device id (one or more digits):
    0 = first device (serial port) in 'portConfigs.json'
    1 = second device
    2 = third device
       :
  Other messages from the client app to the NodeBot Server:
    Broadcast|message      - Broadcast the firmware <message> to all devices
    GetFileList|path       - Get a list of files in NodeBot_Client\<path>
    GetFile|path           - Get the contents of the file at NodeBot_Client\<path>
    PutFile|path|contents  - Put (write) <contents> to NodeBot_Client\<path>
                             (use '|' to delimit lines in <contents>)
                             
  Messages from the NodeBot Server to the client app:
    id|message                  - Firmware <message> from device <id>
    FileList|fname1|fname2|...  - List of files from GetFileList
    File|contents               - Contents of file from GetFile
                                  (separate lines in <contents> are
                                   delimited with '|' char)
                                   
█ Architecture:
  ┌────────────────────────────────────────────────┐
  │NodeBot_Client                                  │
  │                                                │
  │         W E B   A P P L I C A T I O N          │
  │           (NodeBot User Interface)             │
  │                                                │
  │        HTML5/CSS3/Javascript/jQuery/...        │
  │                                                │
  └────────╥─────────────────────╥─────────────────┘
           ║                     ║
           ║ HTTP                ║ Websocket
           ║ Pages               ║ Messages
           ║                     ║
  ┌────────╨─────────────────────╨─────────────────┐
  │NodeBot_Server                                  │
  │                                                │
  │          N O D E B O T   S E R V E R           ╞════════╗
  │                                                │        ║
  │    ∙ HTTP Server for Web App above             │ ┌──────╨──────┐
  │      using Express                             │ │             │
  │                                                │ │ portConfigs │
  │    ∙ Websocket Server for Web App above        │ │    .json    │
  │      using Socket.io                           │ │             │
  │                                                │ │  loaded at  │
  │    ∙ Serial Port Connections to multiple       │ │   startup   │
  │      MCU Boards below using node-serialport    │ └─────────────┘
  │                                                │
  └──────╥────────────────╥────────────────╥───────┘
         ║                ╨                ║
         ║           Serial Port           ║
         ║          Communications         ║
         ║                ╥                ║
  ┌──────╨───────┐ ┌──────╨───────┐ ┌──────╨───────┐ ┌────
  │              │ │              │ │              │ │
  │    M C U     │ │    M C U     │ │    M C U     │ │
  │  B O A R D   │ │  B O A R D   │ │  B O A R D   │ │
  │              │ │              │ │              │ │
  │   Arduino    │ │   Arduino    │ │   Arduino    │ │∙∙∙
  │ Beagleboard  │ │ Beagleboard  │ │ Beagleboard  │ │
  │ Raspberry Pi │ │ Raspberry Pi │ │ Raspberry Pi │ │
  │      :       │ │      :       │ │      :       │ │
  │              │ │              │ │              │ │
  └──────────────┘ └──────────────┘ └──────────────┘ └────
  
  
